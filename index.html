<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hall Family Reunion</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light mode (default) */
            --bg-color: #F5F5DC; /* Beige */
            --text-color: #333333;
            --card-bg: #ffffff;
            --card-shadow: rgba(0, 0, 0, 0.1);
            
            --primary-color: #FFD700; /* Gold yellow */
            --light-primary: #FFEB3B; /* Light yellow */
            --dark-primary: #FFC107; /* Dark yellow/amber */
            --accent-color: #FF5722; /* Deep orange accent */
            
            --primary-gray: #808080;
            --light-gray: #F5F5DC; /* Beige */
            --dark-gray: #5D4037; /* Brown for contrast with yellow */
            --border-color: #E0E0E0;
            
            /* These are kept for compatibility with existing code */
            --primary-purple: var(--primary-color);
            --light-purple: var(--light-primary);
            --dark-purple: var(--dark-primary);
        }
        
        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #E0E0E0;
            --card-bg: #1F1F1F;
            --card-shadow: rgba(0, 0, 0, 0.4);
            
            --primary-color: #FFC107; /* Darker amber for dark mode */
            --light-primary: #FFD740;
            --dark-primary: #FFA000;
            --accent-color: #FF6E40;
            
            --primary-gray: #9E9E9E;
            --light-gray: #242424;
            --dark-gray: #333333;
            --border-color: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            position: relative;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Dark/Light mode toggle switch */
        .theme-switch-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
        }
        
        .theme-switch {
            display: inline-block;
            height: 34px;
            position: relative;
            width: 60px;
        }
        
        .theme-switch input {
            display: none;
        }
        
        .slider {
            background-color: #ccc;
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            background-color: white;
            bottom: 4px;
            content: "";
            height: 26px;
            left: 4px;
            position: absolute;
            transition: .4s;
            width: 26px;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--dark-primary);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .balloon {
            position: absolute;
            width: 40px;
            height: 50px;
            border-radius: 50%;
            animation: floatUp 12s linear infinite;
            opacity: 0.9;
            z-index: 10;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            bottom: -80px;
        }

        .balloon:before {
            content: "";
            position: absolute;
            width: 2px;
            height: 30px;
            background-color: #555;
            bottom: -28px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Multiple colors for balloons */
        .balloon:nth-child(5n+1) { background-color: #FF5252; } /* Red */
        .balloon:nth-child(5n+2) { background-color: #FF9800; } /* Orange */
        .balloon:nth-child(5n+3) { background-color: var(--primary-purple); } /* Yellow */
        .balloon:nth-child(5n+4) { background-color: #4CAF50; } /* Green */
        .balloon:nth-child(5n+5) { background-color: #2196F3; } /* Blue */

        .balloon:nth-child(3n) { animation-duration: 10s; }
        .balloon:nth-child(3n+1) { animation-duration: 14s; }
        .balloon:nth-child(3n+2) { animation-duration: 16s; }

        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.9;
            }
            25% {
                transform: translateY(-25vh) rotate(5deg);
            }
            50% {
                transform: translateY(-50vh) rotate(-5deg);
            }
            75% {
                transform: translateY(-75vh) rotate(5deg);
            }
            100% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 0;
            }
        }

        header {
            background: linear-gradient(135deg, var(--primary-purple) 0%, var(--dark-purple) 100%);
            padding: 2rem 0;
            text-align: center;
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 2rem;
        }
        
        .family-crest {
            width: 150px;
            height: auto;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.3));
            border-radius: 5px;
        }

        .title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            animation: fadeIn 1s ease-out;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            animation: slideUp 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 0.9; }
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 768px) {
            .container {
                grid-template-columns: 1fr 1fr;
            }
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 10px var(--card-shadow);
            overflow: hidden;
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background: linear-gradient(to right, var(--primary-purple), var(--dark-purple));
            color: white;
            padding: 1rem;
            font-weight: bold;
        }

        .card-body {
            padding: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--dark-gray);
        }

        input, select, textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            font-size: 1rem;
        }

        button {
            background-color: var(--primary-purple);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: var(--dark-purple);
        }

        /* Messaging section */
        .messages {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            padding: 1rem;
        }

        .message {
            margin-bottom: 0.8rem;
            padding: 0.8rem;
            border-radius: 8px;
            animation: fadeIn 0.5s ease;
            position: relative;
        }

        .message.sent {
            background-color: var(--light-purple);
            color: white;
            align-self: flex-end;
            margin-left: 20%;
        }

        .message.received {
            background-color: var(--light-gray);
            color: var(--text-color);
            margin-right: 20%;
        }

        .message.private {
            background-color: #9C27B0; /* Purple for contrast with yellow theme */
            color: white;
            border: 1px dashed var(--light-purple);
        }

        .message-header {
            font-weight: bold;
            margin-bottom: 0.3rem;
            display: flex;
            justify-content: space-between;
        }

        .message-time {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .message-type-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.4rem;
            border-radius: 10px;
            margin-left: 0.5rem;
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        .message-options {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
        }
        
        .message-tabs {
            display: flex;
            background-color: var(--light-gray);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .message-tab {
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .message-tab.active {
            background-color: var(--primary-purple);
            color: white;
        }
        
        /* Video/Voice chat styles */
        .voice-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .voice-button, .video-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--primary-purple);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .voice-button.active, .video-button.active {
            background-color: #FF5722; /* Deep orange for active state */
        }
        
        .voice-button:hover, .video-button:hover {
            background-color: var(--dark-purple);
        }
        
        .voice-status {
            font-size: 0.9rem;
            margin: 0.5rem 0;
            padding: 0.5rem;
            background-color: var(--light-gray);
            border-radius: 5px;
            text-align: center;
        }
        
        .pulse {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #FF5722; /* Deep orange to match active state */
            margin-right: 5px;
            animation: pulse-animation 2s infinite;
        }
        
        @keyframes pulse-animation {
            0% { transform: scale(0.8); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(0.8); opacity: 0.8; }
        }
        
        .video-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 1rem 0;
            justify-content: center;
        }
        
        .video-item {
            position: relative;
            width: 200px;
            height: 150px;
            background-color: var(--dark-gray);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
        }
        
        .video-item.self {
            border: 2px solid var(--primary-purple);
        }
        
        .video-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 5px;
            text-align: center;
            font-size: 12px;
        }
        
        .video-controls {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: 10px;
        }
        
        .video-control-button {
            background-color: var(--dark-gray);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .video-control-button:hover {
            background-color: var(--primary-purple);
        }
        
        .video-control-button.active {
            background-color: #FF5722; /* Deep orange to match other active states */
        }

        /* Balloon Burst Animation */
        @keyframes burst {
            0% { 
                transform: scale(1); 
                opacity: 1; 
            }
            20% { 
                transform: scale(1.2); 
            }
            50% { 
                transform: scale(0.8); 
                opacity: 0.8; 
            }
            80% { 
                transform: scale(1.5); 
                opacity: 0.2; 
            }
            100% { 
                transform: scale(2); 
                opacity: 0; 
            }
        }

        .balloon-burst {
            animation: burst 0.5s ease-out forwards;
        }

        .celebration-balloon {
            position: fixed;
            width: 50px;
            height: 60px;
            background-color: var(--primary-purple);
            border-radius: 50%;
            z-index: 100;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .celebration-balloon:before {
            content: "";
            position: absolute;
            width: 2px;
            height: 30px;
            background-color: #555;
            bottom: -28px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Suggestions section */
        .suggestion-list {
            list-style: none;
        }

        .suggestion-item {
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            border-radius: 5px;
            background-color: var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .suggestion-item button {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        .attendee-count {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background-color: var(--primary-purple);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 0 auto 1rem auto;
            position: relative;
            overflow: hidden;
        }

        .attendee-count::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 0.3; }
            100% { transform: scale(0.8); opacity: 0.7; }
        }

        /* Notifications section */
        .notification {
            padding: 0.8rem;
            background-color: var(--light-primary);
            color: var(--text-color);
            border-radius: 5px;
            margin-bottom: 0.5rem;
            animation: slideIn 0.5s ease;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .tabs {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--light-gray);
        }

        .tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s ease;
        }

        .tab.active {
            background-color: var(--light-purple);
            color: white;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Balloons -->
    <div class="balloon" style="top: 10%; left: 10%;"></div>
    <div class="balloon" style="top: 15%; left: 20%;"></div>
    <div class="balloon" style="top: 8%; left: 30%;"></div>
    <div class="balloon" style="top: 12%; left: 70%;"></div>
    <div class="balloon" style="top: 5%; left: 85%;"></div>
    <div class="balloon" style="top: 18%; left: 90%;"></div>

    <!-- Header -->
    <!-- Theme Switch Toggle -->
    <div class="theme-switch-container">
        <label class="theme-switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
        </label>
    </div>
    
    <header>
        <div class="header-content">
            <img src="ftzyqj56yc.png" alt="Hall Family Crest" class="family-crest">
            <div>
                <h1 class="title">Hall Family Reunion</h1>
                <p class="subtitle">Join us for a celebration of family and memories</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Registration Card -->
        <div class="card">
            <div class="card-header">
                Register for the Reunion
            </div>
            <div class="card-body">
                <form id="registration-form">
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" placeholder="Enter your full name" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="Enter your email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" placeholder="Enter your phone number">
                    </div>

                    <div class="form-group">
                        <label for="attendees">Number of Attendees (Total Count)</label>
                        <select id="attendees" required>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6+">6+</option>
                        </select>
                    </div>
                    
                    <div id="multiple-registrants-container">
                        <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Additional Attendee Details (Optional)</h4>
                        <p class="small-text" style="font-size: 0.8rem; margin-bottom: 1rem;">Add information for other people attending with you</p>
                        
                        <div id="additional-attendees">
                            <!-- Additional attendees will be added here dynamically -->
                        </div>
                        
                        <button type="button" id="add-attendee-btn" style="margin-top: 0.5rem;">
                            Add Another Attendee
                        </button>
                    </div>

                    <div class="form-group">
                        <label for="location">Coming From (Location)</label>
                        <input type="text" id="location" placeholder="City, State" required>
                    </div>

                    <div class="form-group">
                        <label for="special-needs">Special Accommodations</label>
                        <textarea id="special-needs" placeholder="Any dietary restrictions or other needs?" rows="3"></textarea>
                    </div>

                    <button type="submit">Register Now</button>
                </form>
            </div>
        </div>

        <!-- Dashboard Card -->
        <div class="card">
            <div class="card-header">
                Family Dashboard
            </div>
            <div class="card-body">
                <div class="tabs">
                    <div class="tab active" data-tab="attendance">Attendance</div>
                    <div class="tab" data-tab="messaging">Messaging</div>
                    <div class="tab" data-tab="suggestions">Suggestions</div>
                    <div class="tab" data-tab="notifications">Notifications</div>
                </div>

                <!-- Attendance Content -->
                <div class="tab-content active" id="attendance-content">
                    <div class="attendee-count">0</div>
                    <h3>Confirmed Attendees</h3>
                    <ul id="attendee-list" class="suggestion-list">
                        <!-- Attendees will be listed here dynamically -->
                    </ul>
                </div>

                <!-- Messaging Content -->
                <div class="tab-content" id="messaging-content">
                    <div class="message-tabs">
                        <div class="message-tab active" data-msg-tab="public">Public Chat</div>
                        <div class="message-tab" data-msg-tab="private">Private Messages</div>
                    </div>
                    
                    <div id="public-chat" class="messages" style="display: block;">
                        <!-- Public messages will appear here -->
                    </div>
                    <div id="private-chat" class="messages" style="display: none;">
                        <!-- Private messages will appear here -->
                    </div>
                    
                    <div class="voice-controls">
                        <button id="start-group-voice" class="voice-button">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 11a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v3a3 3 0 0 0 3 3z"/>
                                <path d="M13 8c0 2.03-1.3 3.75-3.11 4.39a.5.5 0 0 0-.38.48v.24c0 .27.22.5.5.5h1.5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1H8a.5.5 0 0 0 .5-.5v-.24a.5.5 0 0 0-.38-.48C6.3 11.75 5 10.03 5 8a.5.5 0 0 1 1 0 3 3 0 0 0 6 0 .5.5 0 0 1 1 0z"/>
                            </svg>
                            Group Voice Chat
                        </button>
                        
                        <button id="start-group-video" class="video-button">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/>
                            </svg>
                            Group Video Chat
                        </button>
                    </div>
                    <div class="voice-status" id="voice-status">Video/Voice chat inactive</div>
                    
                    <div class="video-container" id="video-container" style="display: none;">
                        <!-- Videos will be added here dynamically -->
                    </div>
                    
                    <div class="video-controls" id="video-controls" style="display: none;">
                        <button class="video-control-button" id="toggle-video">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                                <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                            </svg>
                        </button>
                        <button class="video-control-button" id="toggle-audio">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>
                                <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>
                                <path d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7.5 4v8a.5.5 0 0 1-.783.413l-1.806-1.147A.5.5 0 0 0 4.5 11H1a.5.5 0 0 1-.5-.5v-5A.5.5 0 0 1 1 5h3.5a.5.5 0 0 0 .411-.167L6.717 3.55zm2.376-1.367a.5.5 0 0 0-.753.22l-1.277 2.132C6.743 4.2 6.332 4 6 4a2 2 0 0 0-2 2v1H3a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-1h1.167c.332 0 .743-.2 1.063-.535l1.277 2.132a.5.5 0 0 0 .753.22z"/>
                              </svg>
                        </button>
                    </div>
                    
                    <div id="message-form">
                        <div class="form-group">
                            <label id="recipient-label" style="display: none;">Send private message to:</label>
                            <select id="message-recipient" class="form-control" style="display: none; margin-bottom: 10px;">
                                <option value="">Select Recipient</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <textarea id="message-input" placeholder="Type your message..." rows="3"></textarea>
                        </div>
                        <div class="message-options">
                            <button id="send-message">Send Message</button>
                            <button id="start-private-voice" class="voice-button" style="display: none;">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M8 11a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v3a3 3 0 0 0 3 3z"/>
                                    <path d="M13 8c0 2.03-1.3 3.75-3.11 4.39a.5.5 0 0 0-.38.48v.24c0 .27.22.5.5.5h1.5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1H8a.5.5 0 0 0 .5-.5v-.24a.5.5 0 0 0-.38-.48C6.3 11.75 5 10.03 5 8a.5.5 0 0 1 1 0 3 3 0 0 0 6 0 .5.5 0 0 1 1 0z"/>
                                </svg>
                                Private Voice Call
                            </button>
                            <button id="start-private-video" class="video-button" style="display: none;">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/>
                                </svg>
                                Private Video Call
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Suggestions Content -->
                <div class="tab-content" id="suggestions-content">
                    <div class="form-group">
                        <label for="suggestion-type">Suggestion Type</label>
                        <select id="suggestion-type">
                            <option value="activity">Activity</option>
                            <option value="food">Food</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <textarea id="suggestion-input" placeholder="Enter your suggestion..." rows="3"></textarea>
                    </div>
                    <button id="add-suggestion">Add Suggestion</button>

                    <h3 style="margin-top: 1.5rem;">Activities</h3>
                    <ul id="activities-list" class="suggestion-list">
                        <!-- Activities will be listed here -->
                    </ul>

                    <h3 style="margin-top: 1.5rem;">Food</h3>
                    <ul id="food-list" class="suggestion-list">
                        <!-- Food items will be listed here -->
                    </ul>
                </div>

                <!-- Notifications Content -->
                <div class="tab-content" id="notifications-content">
                    <h3>Recent Updates</h3>
                    <div id="notifications">
                        <!-- Notifications will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize data from localStorage or create new empty arrays
        const attendees = JSON.parse(localStorage.getItem('hall-reunion-attendees')) || [];
        const publicMessages = JSON.parse(localStorage.getItem('hall-reunion-public-messages')) || [];
        const privateMessages = JSON.parse(localStorage.getItem('hall-reunion-private-messages')) || [];
        const activities = JSON.parse(localStorage.getItem('hall-reunion-activities')) || [
            'Family Photo Session', 'Talent Show', 'Board Games Tournament'
        ];
        const foodItems = JSON.parse(localStorage.getItem('hall-reunion-food')) || [
            'BBQ Ribs', 'Potato Salad', 'Apple Pie'
        ];
        const notifications = JSON.parse(localStorage.getItem('hall-reunion-notifications')) || [];
        
        // WebRTC variables
        let localStream = null;
        let localVideoStream = null;
        let peerConnections = {};
        let currentCall = null;
        let isCallActive = false;
        let isVideoCallActive = false;
        let isVideoEnabled = true;
        let isAudioEnabled = true;

        // No need for admin status as all information is visible

        // DOM Elements
        const registrationForm = document.getElementById('registration-form');
        const messagingForm = document.getElementById('send-message');
        const messageInput = document.getElementById('message-input');
        const publicChatContainer = document.getElementById('public-chat');
        const privateChatContainer = document.getElementById('private-chat');
        const attendeeList = document.getElementById('attendee-list');
        const attendeeCount = document.querySelector('.attendee-count');
        const addSuggestionBtn = document.getElementById('add-suggestion');
        const suggestionInput = document.getElementById('suggestion-input');
        const suggestionType = document.getElementById('suggestion-type');
        const activitiesList = document.getElementById('activities-list');
        const foodList = document.getElementById('food-list');
        const notificationsContainer = document.getElementById('notifications');
        const messageRecipient = document.getElementById('message-recipient');
        const recipientLabel = document.getElementById('recipient-label');
        const startGroupVoice = document.getElementById('start-group-voice');
        const startGroupVideo = document.getElementById('start-group-video');
        const startPrivateVoice = document.getElementById('start-private-voice');
        const startPrivateVideo = document.getElementById('start-private-video');
        const voiceStatus = document.getElementById('voice-status');
        const videoContainer = document.getElementById('video-container');
        const videoControls = document.getElementById('video-controls');
        const toggleVideo = document.getElementById('toggle-video');
        const toggleAudio = document.getElementById('toggle-audio');
        const messageTabs = document.querySelectorAll('.message-tab');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Main Tab Switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).classList.add('active');
            });
        });
        
        // Message Tab Switching
        messageTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                messageTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const tabType = tab.getAttribute('data-msg-tab');
                if (tabType === 'public') {
                    publicChatContainer.style.display = 'block';
                    privateChatContainer.style.display = 'none';
                    recipientLabel.style.display = 'none';
                    messageRecipient.style.display = 'none';
                    startPrivateVoice.style.display = 'none';
                    startPrivateVideo.style.display = 'none';
                } else {
                    publicChatContainer.style.display = 'none';
                    privateChatContainer.style.display = 'block';
                    recipientLabel.style.display = 'block';
                    messageRecipient.style.display = 'block';
                    startPrivateVoice.style.display = 'inline-block';
                    startPrivateVideo.style.display = 'inline-block';
                }
            });
        });

        // Update UI with stored data
        function updateUI() {
            // Update attendee count and list
            attendeeCount.textContent = attendees.length;
            attendeeList.innerHTML = '';
            attendees.forEach(person => {
                const listItem = document.createElement('li');
                listItem.className = 'suggestion-item';
                
                let attendeeDetails = `<div>
                    <strong>${person.name}</strong> - ${person.attendees} ${person.attendees === '1' ? 'person' : 'people'} from ${person.location}
                    <p>Email: ${person.email} | Phone: ${person.phone || 'Not provided'}</p>
                    ${person.specialNeeds ? `<p>Special needs: ${person.specialNeeds}</p>` : ''}
                    <p><small>Registered on: ${new Date(person.registrationDate).toLocaleDateString()}</small></p>
                `;
                
                // Add additional attendees if any
                if (person.additionalAttendees && person.additionalAttendees.length > 0) {
                    attendeeDetails += `<div style="margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--light-purple);">
                        <p><strong>Additional Attendees:</strong></p>
                        <ul style="list-style: none; margin-left: 15px;">`;
                    
                    person.additionalAttendees.forEach(additional => {
                        attendeeDetails += `<li>
                            <strong>${additional.name}</strong>
                            ${additional.email ? `<br>Email: ${additional.email}` : ''}
                            ${additional.phone ? `<br>Phone: ${additional.phone}` : ''}
                        </li>`;
                    });
                    
                    attendeeDetails += `</ul></div>`;
                }
                
                attendeeDetails += '</div>';
                listItem.innerHTML = attendeeDetails;
                attendeeList.appendChild(listItem);
                
                // Also add to message recipient dropdown
                const option = document.createElement('option');
                option.value = person.name;
                option.textContent = person.name;
                messageRecipient.appendChild(option);
                
                // Add additional attendees to recipient dropdown as well
                if (person.additionalAttendees) {
                    person.additionalAttendees.forEach(additional => {
                        if (additional.name && additional.name.trim() !== '') {
                            const additionalOption = document.createElement('option');
                            additionalOption.value = additional.name;
                            additionalOption.textContent = additional.name + ' (with ' + person.name + ')';
                            messageRecipient.appendChild(additionalOption);
                        }
                    });
                }
            });

            // Update public messages
            publicChatContainer.innerHTML = '';
            publicMessages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${msg.sent ? 'sent' : 'received'}`;
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span>${msg.sender}</span>
                        <span class="message-type-badge">Public</span>
                    </div>
                    <div>${msg.text}</div>
                    <div class="message-time">${new Date(msg.timestamp).toLocaleString()}</div>
                `;
                publicChatContainer.appendChild(messageDiv);
            });
            publicChatContainer.scrollTop = publicChatContainer.scrollHeight;
            
            // Update private messages
            privateChatContainer.innerHTML = '';
            privateMessages.forEach(msg => {
                if (msg.sender === 'You' || msg.recipient === 'You') {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${msg.sent ? 'sent' : 'received'} private`;
                    messageDiv.innerHTML = `
                        <div class="message-header">
                            <span>${msg.sent ? `To: ${msg.recipient}` : `From: ${msg.sender}`}</span>
                            <span class="message-type-badge">Private</span>
                        </div>
                        <div>${msg.text}</div>
                        <div class="message-time">${new Date(msg.timestamp).toLocaleString()}</div>
                    `;
                    privateChatContainer.appendChild(messageDiv);
                }
            });
            privateChatContainer.scrollTop = privateChatContainer.scrollHeight;

            // Update activities list
            activitiesList.innerHTML = '';
            activities.forEach((activity, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'suggestion-item';
                listItem.innerHTML = `<div>${activity}</div>`;
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Remove';
                removeBtn.onclick = () => removeItem('activity', index);
                listItem.appendChild(removeBtn);
                activitiesList.appendChild(listItem);
            });

            // Update food list
            foodList.innerHTML = '';
            foodItems.forEach((food, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'suggestion-item';
                listItem.innerHTML = `<div>${food}</div>`;
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Remove';
                removeBtn.onclick = () => removeItem('food', index);
                listItem.appendChild(removeBtn);
                foodList.appendChild(listItem);
            });

            // Update notifications
            notificationsContainer.innerHTML = '';
            notifications.slice().reverse().forEach(notification => {
                const notificationDiv = document.createElement('div');
                notificationDiv.className = 'notification';
                notificationDiv.innerHTML = `
                    <strong>${notification.title}</strong>
                    <p>${notification.message}</p>
                    <small>${new Date(notification.timestamp).toLocaleString()}</small>
                `;
                notificationsContainer.appendChild(notificationDiv);
            });
        }

        // Create a template for additional attendee form
        function createAdditionalAttendeeForm(index) {
            const container = document.createElement('div');
            container.className = 'additional-attendee';
            container.style.padding = '1rem';
            container.style.marginBottom = '1rem';
            container.style.border = '1px solid var(--light-purple)';
            container.style.borderRadius = '5px';
            
            container.innerHTML = `
                <h5>Attendee #${index}</h5>
                <div class="form-group">
                    <label for="additional-name-${index}">Full Name</label>
                    <input type="text" id="additional-name-${index}" placeholder="Enter full name" required>
                </div>
                <div class="form-group">
                    <label for="additional-email-${index}">Email</label>
                    <input type="email" id="additional-email-${index}" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label for="additional-phone-${index}">Phone</label>
                    <input type="tel" id="additional-phone-${index}" placeholder="Enter phone number">
                </div>
                <button type="button" class="remove-attendee" data-index="${index}">Remove</button>
            `;
            
            return container;
        }
        
        // Handle the "Add Another Attendee" button
        const addAttendeeBtn = document.getElementById('add-attendee-btn');
        const additionalAttendeesContainer = document.getElementById('additional-attendees');
        let additionalAttendeeCount = 0;
        
        addAttendeeBtn.addEventListener('click', function() {
            additionalAttendeeCount++;
            const newAttendeeForm = createAdditionalAttendeeForm(additionalAttendeeCount);
            additionalAttendeesContainer.appendChild(newAttendeeForm);
            
            // Add event listener to the remove button
            const removeButton = newAttendeeForm.querySelector('.remove-attendee');
            removeButton.addEventListener('click', function() {
                additionalAttendeesContainer.removeChild(newAttendeeForm);
            });
        });

        // Create balloon burst effect
        function createBurstBalloon(x, y) {
            const balloon = document.createElement('div');
            balloon.className = 'celebration-balloon';
            
            // Random color from our theme
            const colors = ['var(--primary-purple)', 'var(--light-purple)', 'var(--dark-purple)'];
            balloon.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            
            balloon.style.left = `${x}px`;
            balloon.style.top = `${y}px`;
            
            document.body.appendChild(balloon);
            
            // Trigger burst animation after a short delay
            setTimeout(() => {
                balloon.classList.add('balloon-burst');
                
                // Remove the element after animation completes
                setTimeout(() => {
                    document.body.removeChild(balloon);
                }, 500); // Animation duration
            }, 100);
        }
        
        // Handle registration form submission
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const attendeeCount = document.getElementById('attendees').value;
            const location = document.getElementById('location').value;
            const specialNeeds = document.getElementById('special-needs').value;
            
            const newAttendee = {
                name,
                email,
                phone,
                attendees: attendeeCount,
                location,
                specialNeeds,
                registrationDate: new Date().toISOString(),
                additionalAttendees: []
            };
            
            // Collect additional attendees data
            const additionalAttendeesForms = document.querySelectorAll('.additional-attendee');
            additionalAttendeesForms.forEach((form, index) => {
                const attendeeIndex = index + 1;
                const additionalName = document.getElementById(`additional-name-${attendeeIndex}`).value;
                const additionalEmail = document.getElementById(`additional-email-${attendeeIndex}`).value;
                const additionalPhone = document.getElementById(`additional-phone-${attendeeIndex}`).value;
                
                newAttendee.additionalAttendees.push({
                    name: additionalName,
                    email: additionalEmail,
                    phone: additionalPhone
                });
            });
            
            attendees.push(newAttendee);
            
            // Add notification for admins
            addNotification('New Registration', `${name} has registered for the reunion with ${attendeeCount} attendee(s) from ${location}.`);
            
            // Create balloon burst effects - multiple balloons
            for (let i = 0; i < 5; i++) {
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * (window.innerHeight / 2); // Keep in upper half of screen
                setTimeout(() => {
                    createBurstBalloon(x, y);
                }, i * 200); // Stagger the balloon bursts
            }
            
            // Save to localStorage and update UI
            localStorage.setItem('hall-reunion-attendees', JSON.stringify(attendees));
            updateUI();
            
            // Reset form
            registrationForm.reset();
            additionalAttendeesContainer.innerHTML = '';
            additionalAttendeeCount = 0;
            
            alert('Registration successful! Thank you for joining the Hall Family Reunion!');
        });

        // Handle sending messages
        messagingForm.addEventListener('click', function() {
            const messageText = messageInput.value.trim();
            if (!messageText) return;
            
            // Check if we're in private or public mode
            const isPrivateMode = document.querySelector('.message-tab.active').getAttribute('data-msg-tab') === 'private';
            
            if (isPrivateMode) {
                const recipient = messageRecipient.value;
                if (!recipient) {
                    alert('Please select a recipient for your private message.');
                    return;
                }
                
                const newMessage = {
                    sender: 'You',
                    recipient: recipient,
                    text: messageText,
                    timestamp: new Date().toISOString(),
                    sent: true,
                    private: true
                };
                
                privateMessages.push(newMessage);
                localStorage.setItem('hall-reunion-private-messages', JSON.stringify(privateMessages));
                
                // Simulate a response for demo purposes
                setTimeout(() => {
                    const responses = [
                        "Thanks for the private message!",
                        "I'll keep this between us.",
                        "Good to know, thanks for letting me know privately.",
                        "I appreciate the heads up!",
                        "I'll respond to this privately later."
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    const responseMsg = {
                        sender: recipient,
                        recipient: 'You',
                        text: randomResponse,
                        timestamp: new Date().toISOString(),
                        sent: false,
                        private: true
                    };
                    
                    privateMessages.push(responseMsg);
                    localStorage.setItem('hall-reunion-private-messages', JSON.stringify(privateMessages));
                    updateUI();
                }, 1500);
            } else {
                // Public message
                const newMessage = {
                    sender: 'You',
                    text: messageText,
                    timestamp: new Date().toISOString(),
                    sent: true,
                    private: false
                };
                
                publicMessages.push(newMessage);
                localStorage.setItem('hall-reunion-public-messages', JSON.stringify(publicMessages));
                
                // Simulate a response for demo purposes
                setTimeout(() => {
                    const responses = [
                        "Looking forward to seeing everyone!",
                        "Thanks for the update!",
                        "Can't wait for the reunion!",
                        "I'll bring some extra chairs.",
                        "Does anyone need a ride from the airport?"
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    const responseMsg = {
                        sender: 'Family Member',
                        text: randomResponse,
                        timestamp: new Date().toISOString(),
                        sent: false,
                        private: false
                    };
                    
                    publicMessages.push(responseMsg);
                    localStorage.setItem('hall-reunion-public-messages', JSON.stringify(publicMessages));
                    updateUI();
                }, 1500);
            }
            
            messageInput.value = '';
            updateUI();
        });

        // Handle adding suggestions
        addSuggestionBtn.addEventListener('click', function() {
            const suggestionText = suggestionInput.value.trim();
            if (!suggestionText) return;
            
            const type = suggestionType.value;
            
            if (type === 'activity') {
                activities.push(suggestionText);
                localStorage.setItem('hall-reunion-activities', JSON.stringify(activities));
            } else if (type === 'food') {
                foodItems.push(suggestionText);
                localStorage.setItem('hall-reunion-food', JSON.stringify(foodItems));
            }
            
            suggestionInput.value = '';
            updateUI();
            
            // Add notification
            addNotification('New Suggestion', `A new ${type} suggestion has been added: "${suggestionText}".`);
        });

        // Function to remove items (available to everyone)
        function removeItem(type, index) {
            if (type === 'activity') {
                activities.splice(index, 1);
                localStorage.setItem('hall-reunion-activities', JSON.stringify(activities));
            } else if (type === 'food') {
                foodItems.splice(index, 1);
                localStorage.setItem('hall-reunion-food', JSON.stringify(foodItems));
            }
            
            updateUI();
        }

        // Function to add notifications
        function addNotification(title, message) {
            const notification = {
                title,
                message,
                timestamp: new Date().toISOString()
            };
            
            notifications.push(notification);
            localStorage.setItem('hall-reunion-notifications', JSON.stringify(notifications));
            updateUI();
        }

        // Dark/Light Mode Functionality
        const themeToggle = document.getElementById('theme-toggle');
        
        // Check for saved user preference
        const savedTheme = localStorage.getItem('hall-reunion-theme');
        
        // Function to set the theme
        function setTheme(isDark) {
            if (isDark) {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.checked = true;
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeToggle.checked = false;
            }
        }
        
        // Initialize theme based on saved preference or system preference
        if (savedTheme) {
            // Use saved preference
            setTheme(savedTheme === 'dark');
        } else {
            // Check if user has dark mode enabled in their OS
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
            setTheme(prefersDarkScheme);
        }
        
        // Add event listener to toggle theme
        themeToggle.addEventListener('change', function() {
            const isDark = this.checked;
            setTheme(isDark);
            localStorage.setItem('hall-reunion-theme', isDark ? 'dark' : 'light');
        });
        
        // Initialize the UI
        updateUI();

        // Voice and Video Chat WebRTC Functions
        startGroupVoice.addEventListener('click', () => {
            if (isCallActive) {
                endCall();
                return;
            }
            
            // Instead of requesting microphone access, simulate audio-only call
            startGroupCall(false);
            addNotification('Voice Chat', 'Voice chat is simulated (no actual microphone access).');
        });
        
        startGroupVideo.addEventListener('click', () => {
            if (isCallActive || isVideoCallActive) {
                endCall();
                return;
            }
            
            // Instead of requesting camera/mic permissions, use static images
            startGroupCall(true);
            
            // Display local "video" (actually an image)
            const videoItem = createStaticVideoElement('You', 'ftzyqj56yc.png', true);
            videoContainer.appendChild(videoItem);
            videoContainer.style.display = 'flex';
            videoControls.style.display = 'flex';
        });
        
        startPrivateVoice.addEventListener('click', () => {
            const recipient = messageRecipient.value;
            if (!recipient) {
                alert('Please select a recipient for the private call.');
                return;
            }
            
            if (isCallActive) {
                endCall();
                return;
            }
            
            // Instead of requesting microphone access, simulate audio-only call
            startPrivateCall(recipient, false);
            addNotification('Voice Chat', `Private voice chat with ${recipient} is simulated (no actual microphone access).`);
        });
        
        startPrivateVideo.addEventListener('click', () => {
            const recipient = messageRecipient.value;
            if (!recipient) {
                alert('Please select a recipient for the private video call.');
                return;
            }
            
            if (isCallActive || isVideoCallActive) {
                endCall();
                return;
            }
            
            // Instead of requesting camera/mic permissions, use static images
            startPrivateCall(recipient, true);
            
            // Display local "video" (actually an image)
            const videoItem = createStaticVideoElement('You', 'ftzyqj56yc.png', true);
            videoContainer.appendChild(videoItem);
            videoContainer.style.display = 'flex';
            videoControls.style.display = 'flex';
            
            // Simulate other party joining (for demo purposes)
            setTimeout(() => {
                simulateRemoteParticipant(recipient);
            }, 1500);
        });
        
        function createVideoElement(name, stream, isSelf) {
            const videoItem = document.createElement('div');
            videoItem.className = `video-item ${isSelf ? 'self' : ''}`;
            
            const video = document.createElement('video');
            video.srcObject = stream;
            video.autoplay = true;
            video.muted = isSelf; // Mute self video to avoid feedback
            video.playsInline = true;
            
            const videoName = document.createElement('div');
            videoName.className = 'video-name';
            videoName.textContent = name;
            
            videoItem.appendChild(video);
            videoItem.appendChild(videoName);
            
            return videoItem;
        }
        
        function createStaticVideoElement(name, imageSrc, isSelf) {
            const videoItem = document.createElement('div');
            videoItem.className = `video-item ${isSelf ? 'self' : ''}`;
            
            const img = document.createElement('img');
            img.src = imageSrc;
            img.alt = `${name}'s video`;
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.objectFit = 'cover';
            
            const videoName = document.createElement('div');
            videoName.className = 'video-name';
            videoName.textContent = name;
            
            videoItem.appendChild(img);
            videoItem.appendChild(videoName);
            
            return videoItem;
        }
        
        // For demo purposes - simulate other participant
        function simulateRemoteParticipant(name) {
            // Instead of using canvas and fake streams, use the Hall family crest image
            // for simulating remote participants
            
            // Create participant with static image
            const videoItem = createStaticVideoElement(name, 'ftzyqj56yc.png', false);
            videoContainer.appendChild(videoItem);
            
            // Add some simulated connection status
            addNotification('Video Chat', `${name} has joined the video chat.`);
        }
        
        function startGroupCall(withVideo) {
            if (withVideo) {
                voiceStatus.innerHTML = '<span class="pulse"></span> Group video chat active';
                startGroupVideo.classList.add('active');
                startGroupVideo.textContent = 'End Video Call';
                isVideoCallActive = true;
                
                // Simulate other participants joining for demo
                setTimeout(() => {
                    simulateRemoteParticipant('Family Member 1');
                    simulateRemoteParticipant('Family Member 2');
                }, 1500);
                
                addNotification('Video Chat', 'You started a group video call.');
            } else {
                voiceStatus.innerHTML = '<span class="pulse"></span> Group voice chat active';
                startGroupVoice.classList.add('active');
                startGroupVoice.textContent = 'End Voice Call';
                isCallActive = true;
                
                addNotification('Voice Chat', 'You started a group voice call.');
            }
        }
        
        function startPrivateCall(recipient, withVideo) {
            if (withVideo) {
                voiceStatus.innerHTML = `<span class="pulse"></span> Private video call with ${recipient}`;
                startPrivateVideo.classList.add('active');
                startPrivateVideo.textContent = 'End Video Call';
                isVideoCallActive = true;
                
                addNotification('Video Chat', `You started a private video call with ${recipient}.`);
            } else {
                voiceStatus.innerHTML = `<span class="pulse"></span> Private voice call with ${recipient}`;
                startPrivateVoice.classList.add('active');
                startPrivateVoice.textContent = 'End Voice Call';
                isCallActive = true;
                
                addNotification('Voice Chat', `You started a private voice call with ${recipient}.`);
            }
        }
        
        function endCall() {
            voiceStatus.textContent = 'Video/Voice chat inactive';
            
            // Reset all control buttons
            startGroupVoice.classList.remove('active');
            startGroupVoice.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 11a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v3a3 3 0 0 0 3 3z"/><path d="M13 8c0 2.03-1.3 3.75-3.11 4.39a.5.5 0 0 0-.38.48v.24c0 .27.22.5.5.5h1.5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1H8a.5.5 0 0 0 .5-.5v-.24a.5.5 0 0 0-.38-.48C6.3 11.75 5 10.03 5 8a.5.5 0 0 1 1 0 3 3 0 0 0 6 0 .5.5 0 0 1 1 0z"/></svg> Group Voice Chat';
            
            startPrivateVoice.classList.remove('active');
            startPrivateVoice.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 11a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v3a3 3 0 0 0 3 3z"/><path d="M13 8c0 2.03-1.3 3.75-3.11 4.39a.5.5 0 0 0-.38.48v.24c0 .27.22.5.5.5h1.5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1H8a.5.5 0 0 0 .5-.5v-.24a.5.5 0 0 0-.38-.48C6.3 11.75 5 10.03 5 8a.5.5 0 0 1 1 0 3 3 0 0 0 6 0 .5.5 0 0 1 1 0z"/></svg> Private Voice Chat';
            
            startGroupVideo.classList.remove('active');
            startGroupVideo.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/></svg> Group Video Chat';
            
            startPrivateVideo.classList.remove('active');
            startPrivateVideo.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/></svg> Private Video Chat';
            
            isCallActive = false;
            isVideoCallActive = false;
            
            // No need to stop tracks since we're using static images instead of real streams
            localStream = null;
            localVideoStream = null;
            
            // Clear video container
            videoContainer.innerHTML = '';
            videoContainer.style.display = 'none';
            videoControls.style.display = 'none';
            
            addNotification('Communication', 'Call ended.');
        }
        
        // Video control buttons - simulated for static images
        toggleVideo.addEventListener('click', () => {
            isVideoEnabled = !isVideoEnabled;
            
            // Since we're using static images, just simulate video on/off by changing opacity
            const allVideos = videoContainer.querySelectorAll('.video-item');
            allVideos.forEach(item => {
                if (!isVideoEnabled) {
                    item.style.opacity = '0.5';
                } else {
                    item.style.opacity = '1';
                }
            });
            
            toggleVideo.classList.toggle('active', !isVideoEnabled);
            
            // Show simulated status
            if (!isVideoEnabled) {
                addNotification('Video Control', 'Your video has been turned off (simulated)');
            } else {
                addNotification('Video Control', 'Your video has been turned on (simulated)');
            }
        });
        
        toggleAudio.addEventListener('click', () => {
            isAudioEnabled = !isAudioEnabled;
            
            // Since we're not actually using microphone, just simulate mute/unmute
            toggleAudio.classList.toggle('active', !isAudioEnabled);
            
            // Show simulated status
            if (!isAudioEnabled) {
                addNotification('Audio Control', 'You are now muted (simulated)');
            } else {
                addNotification('Audio Control', 'You are now unmuted (simulated)');
            }
        });
        
        // Create floating balloons at random positions
        function createRandomBalloons(count) {
            for (let i = 0; i < count; i++) {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                
                const randomLeft = Math.random() * 90 + 5; // 5-95%
                const randomDelay = Math.random() * 5; // 0-5s delay for staggered start
                
                balloon.style.left = `${randomLeft}%`;
                balloon.style.animationDelay = `${randomDelay}s`;
                
                document.body.appendChild(balloon);
            }
        }
        
        // Create balloons continuously
        function startBalloonLoop() {
            // Create initial set of balloons
            createRandomBalloons(3);
            
            // Create new balloons periodically
            setInterval(() => {
                // Create 1 new balloon occasionally
                if (Math.random() > 0.5) {
                    createRandomBalloons(1);
                }
                
                // Remove old balloons to avoid too many DOM elements
                const allBalloons = document.querySelectorAll('.balloon');
                if (allBalloons.length > 8) {
                    const balloonsToRemove = allBalloons.length - 8;
                    for (let i = 0; i < balloonsToRemove; i++) {
                        if (allBalloons[i] && allBalloons[i].parentNode) {
                            allBalloons[i].parentNode.removeChild(allBalloons[i]);
                        }
                    }
                }
            }, 5000); // Create new balloons less frequently
        }
        
        // Start the balloon animation loop
        startBalloonLoop();
    </script>
</body>
</html>